{"openapi":"3.0.2","info":{"title":"Haystack-API","version":"1.0.0"},"paths":{"/initialized":{"get":{"tags":["search"],"summary":"Check Status","description":"This endpoint can be used during startup to understand if the \nserver is ready to take any requests, or is still loading.\n\nThe recommended approach is to call this endpoint with a short timeout,\nlike 500ms, and in case of no reply, consider the server busy.","operationId":"check_status","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/hs_version":{"get":{"tags":["search"],"summary":"Haystack Version","operationId":"haystack_version","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/query":{"post":{"tags":["search"],"summary":"Query","operationId":"query","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/feedback":{"get":{"tags":["feedback"],"summary":"Get Feedback","operationId":"get_feedback","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"tags":["feedback"],"summary":"Post Feedback","operationId":"post_feedback","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelSerialized"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/eval-feedback":{"post":{"tags":["feedback"],"summary":"Get Feedback Metrics","description":"Return basic accuracy metrics based on the user feedback.\nWhich ratio of answers was correct? Which ratio of documents was correct?\nYou can supply filters in the request to only use a certain subset of labels.\n\n**Example:**\n\n    ```\n        | curl --location --request POST 'http://127.0.0.1:8000/eval-doc-qa-feedback'             | --header 'Content-Type: application/json'             | --data-raw '{ \"filters\": {\"document_id\": [\"XRR3xnEBCYVTkbTystOB\"]} }'","operationId":"get_feedback_metrics","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilterRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/export-feedback":{"get":{"tags":["feedback"],"summary":"Export Feedback","description":"SQuAD format JSON export for question/answer pairs that were marked as \"relevant\".\n\nThe context_size param can be used to limit response size for large documents.","operationId":"export_feedback","parameters":[{"required":false,"schema":{"title":"Context Size","type":"integer","default":100000},"name":"context_size","in":"query"},{"required":false,"schema":{"title":"Full Document Context","type":"boolean","default":true},"name":"full_document_context","in":"query"},{"required":false,"schema":{"title":"Only Positive Labels","type":"boolean","default":false},"name":"only_positive_labels","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/file-upload":{"post":{"tags":["file-upload"],"summary":"Upload File","operationId":"upload_file","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_file_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/get_by_filters":{"post":{"tags":["document"],"summary":"Get Documents","description":"Can be used to get documents from a document store.\n\n:param filters: Filters to narrow down the documents to delete.\n                Example: '{\"filters\": {{\"name\": [\"some\", \"more\"], \"category\": [\"only_one\"]}}'\n                To get all documents you should provide an empty dict, like:\n                '{\"filters\": {}}'","operationId":"get_documents","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Documents Documents Get By Filters Post","type":"array","items":{"$ref":"#/components/schemas/DocumentSerialized"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/delete_by_filters":{"post":{"tags":["document"],"summary":"Delete Documents","description":"Can be used to delete documents from a document store.\n\n:param filters: Filters to narrow down the documents to delete.\n                Example: '{\"filters\": {{\"name\": [\"some\", \"more\"], \"category\": [\"only_one\"]}}'\n                To delete all documents you should provide an empty dict, like:\n                '{\"filters\": {}}'","operationId":"delete_documents","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Delete Documents Documents Delete By Filters Post","type":"boolean"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AnswerSerialized":{"title":"AnswerSerialized","required":["answer"],"type":"object","properties":{"answer":{"title":"Answer","type":"string"},"type":{"title":"Type","enum":["generative","extractive","other"],"type":"string","default":"extractive"},"score":{"title":"Score","type":"number"},"context":{"title":"Context","type":"string"},"offsets_in_document":{"title":"Offsets In Document","type":"array","items":{"$ref":"#/components/schemas/Span"}},"offsets_in_context":{"title":"Offsets In Context","type":"array","items":{"$ref":"#/components/schemas/Span"}},"document_id":{"title":"Document Id","type":"string"},"meta":{"title":"Meta","type":"object"}}},"Body_upload_file_file_upload_post":{"title":"Body_upload_file_file_upload_post","required":["files"],"type":"object","properties":{"files":{"title":"Files","type":"array","items":{"type":"string","format":"binary"}},"meta":{"title":"Meta","type":"string","default":"null"},"remove_numeric_tables":{"title":"Remove Numeric Tables"},"valid_languages":{"title":"Valid Languages"},"clean_whitespace":{"title":"Clean Whitespace"},"clean_empty_lines":{"title":"Clean Empty Lines"},"clean_header_footer":{"title":"Clean Header Footer"},"split_by":{"title":"Split By"},"split_length":{"title":"Split Length"},"split_overlap":{"title":"Split Overlap"},"split_respect_sentence_boundary":{"title":"Split Respect Sentence Boundary"}}},"DocumentSerialized":{"title":"DocumentSerialized","required":["content","content_type","id","meta"],"type":"object","properties":{"content":{"title":"Content","type":"string"},"content_type":{"title":"Content Type","enum":["text","table","image"],"type":"string"},"id":{"title":"Id","type":"string"},"meta":{"title":"Meta","type":"object"},"score":{"title":"Score","type":"number"},"embedding":{"title":"Embedding","type":"array","items":{"type":"number"}},"id_hash_keys":{"title":"Id Hash Keys","type":"array","items":{"type":"string"}}}},"FilterRequest":{"title":"FilterRequest","type":"object","properties":{"filters":{"title":"Filters","type":"object","additionalProperties":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"LabelSerialized":{"title":"LabelSerialized","required":["id","query","document","is_correct_answer","is_correct_document","origin"],"type":"object","properties":{"id":{"title":"Id","type":"string"},"query":{"title":"Query","type":"string"},"document":{"$ref":"#/components/schemas/DocumentSerialized"},"is_correct_answer":{"title":"Is Correct Answer","type":"boolean"},"is_correct_document":{"title":"Is Correct Document","type":"boolean"},"origin":{"title":"Origin","enum":["user-feedback","gold-label"],"type":"string"},"answer":{"$ref":"#/components/schemas/AnswerSerialized"},"no_answer":{"title":"No Answer","type":"boolean"},"pipeline_id":{"title":"Pipeline Id","type":"string"},"created_at":{"title":"Created At","type":"string"},"updated_at":{"title":"Updated At","type":"string"},"meta":{"title":"Meta","type":"object"}}},"QueryRequest":{"title":"QueryRequest","required":["query"],"type":"object","properties":{"query":{"title":"Query","type":"string"},"params":{"title":"Params","type":"object"},"debug":{"title":"Debug","type":"boolean","default":false}},"additionalProperties":false},"QueryResponse":{"title":"QueryResponse","required":["query","answers"],"type":"object","properties":{"query":{"title":"Query","type":"string"},"answers":{"title":"Answers","type":"array","items":{"$ref":"#/components/schemas/AnswerSerialized"}},"documents":{"title":"Documents","type":"array","items":{"$ref":"#/components/schemas/DocumentSerialized"}},"_debug":{"title":" Debug","type":"object"}}},"Span":{"title":"Span","required":["start","end"],"type":"object","properties":{"start":{"title":"Start","type":"integer"},"end":{"title":"End","type":"integer"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}}}}